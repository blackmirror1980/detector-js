!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("lodash"),require("platform"),require("feature-js"),require("bowser")):"function"==typeof define&&define.amd?define(["lodash","platform","feature-js","bowser"],s):(e=e||self).Detector=s(e._,e.platform,e.feature,e.bowser)}(this,function(t,a,r,n){"use strict";function c(e,s){for(var i=0;i<s.length;i++){var o=s[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}t=t&&t.hasOwnProperty("default")?t.default:t,a=a&&a.hasOwnProperty("default")?a.default:a,r=r&&r.hasOwnProperty("default")?r.default:r,n=n&&n.hasOwnProperty("default")?n.default:n;var l=window.navigator;return function(){function s(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s),e&&(this.cssFlags=[]),this.platform=this.getPlatform(e),this.os=this.getOS(e),this.browser=this.getBrowser(e),this.features=this.getFeatures(e),this.audio=this.getAudio(e),this.video=this.getVideo(e),e&&this.setCssFlags()}var e,i,o;return e=s,(i=[{key:"getPlatform",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={};try{t.merge(s,{description:a.description,manufacturer:a.manufacturer,desktop:!n.mobile&&!n.tablet,phone:n.mobile,tablet:n.tablet}),e&&(s.desktop&&this.cssFlags.push("djs-desktop"),s.phone&&this.cssFlags.push("djs-phone"),s.tablet&&this.cssFlags.push("djs-tablet"))}catch(e){throw e}return s}},{key:"getOS",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={};try{t.merge(s,{architecture:32===a.os.architecture?"x86":"x64",name:a.os.family,version:a.os.version||n.osversion,android:n.android&&"Android"===a.os.family,bada:n.bada,blackberry:n.blackberry,chromeOS:n.chromeos,firefoxOS:n.firefoxos,iOS:n.ios&&"iOS"===a.os.family,linux:n.linux&&t.includes(["Ubuntu","Debian","Fedora","Red Hat","SuSE"],a.os.family),macOS:/Mac OS/.test(l.userAgent)&&n.mac&&t.includes(["OS X","macOS"],a.os.family),sailfish:n.sailfish,tizen:n.tizen,windows:n.windows&&t.includes(["Windows","Windows Server 2008 R2 / 7","Windows Server 2008 / Vista","Windows XP"],a.os.family),windowsPhone:n.windowsphone&&"Windows Phone"===a.os.family}),e&&(s.android&&this.cssFlags.push("djs-os-android"),s.bada&&this.cssFlags.push("djs-os-bada"),s.blackberry&&this.cssFlags.push("djs-os-blackberry"),s.chromeOS&&this.cssFlags.push("djs-os-chromeos"),s.firefoxOS&&this.cssFlags.push("djs-os-firefoxos"),s.iOS&&this.cssFlags.push("djs-os-ios"),s.linux&&this.cssFlags.push("djs-os-linux"),s.macOS&&this.cssFlags.push("djs-os-macos"),s.sailfish&&this.cssFlags.push("djs-os-sailfish"),s.tizen&&this.cssFlags.push("djs-os-tizen"),s.windows&&this.cssFlags.push("djs-os-windows"),s.windowsPhone&&this.cssFlags.push("djs-os-windowsphone"),s.version&&this.cssFlags.push("djs-os-version-"+s.version))}catch(e){throw e}return s}},{key:"getBrowser",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={};try{t.merge(s,{name:n.name||a.name,version:n.version,webApp:l.standalone,engine:{blink:n.blink&&"Blink"===a.layout,gecko:n.gecko&&"Gecko"===a.layout,trident:n.msie&&"Trident"===a.layout,edgeHTML:n.msedge&&"EdgeHTML"===a.layout,webkit:n.webkit&&"WebKit"===a.layout},android:n.android,arora:/Arora/.test(l.userAgent),bada:n.bada,blackberry:n.blackberry,chrome:n.chrome&&t.includes(a.name,"Chrome"),chromeMobile:n.chrome&&n.mobile&&"Chrome Mobile"===a.name,cocoonJS:l.isCocoonJS,edge:n.msedge&&"Microsoft Edge"===a.name,ejecta:void 0!==window.ejecta,electron:"Electron"===a.name,epiphany:/Epiphany/.test(l.userAgent),firefox:n.firefox&&t.includes(a.name,"Firefox"),firefoxMobile:n.firefox&&t.includes(["Firefox for iOS","Firefox Mobile"],a.name),ie:n.msie&&t.includes(a.name,"IE"),ieMobile:n.msie&&n.mobile&&"IE Mobile"===a.name,midori:/Midori/.test(l.userAgent),opera:n.opera&&t.includes(a.name,"Opera"),operaMobile:n.opera&&n.mobile&&t.includes(["Opera Mini","Opera Mobile"],a.name),phantom:n.phantom&&"PhantomJS"===a.name,safari:n.safari&&t.includes(a.name,"Safari"),safariMobile:/Mobile Safari/.test(l.userAgent)&&n.safari&&n.ios&&n.mobile&&t.includes(a.name,"Safari"),sailfish:n.sailfish,seamonkey:n.seamonkey&&"SeaMonkey"===a.name,samsung:n.samsungBrowser,silk:n.silk&&"Silk"===a.name,tizen:n.tizen,webOS:n.webos}),e&&(s.engine.blink&&this.cssFlags.push("djs-engine-blink"),s.engine.gecko&&this.cssFlags.push("djs-engine-gecko"),s.engine.trident&&this.cssFlags.push("djs-engine-trident"),s.engine.edgeHTML&&this.cssFlags.push("djs-engine-edge"),s.engine.webkit&&this.cssFlags.push("djs-engine-webkit"),s.android&&this.cssFlags.push("djs-browser-android-native"),s.arora&&this.cssFlags.push("djs-browser-arora"),s.bada&&this.cssFlags.push("djs-browser-bada"),s.blackberry&&this.cssFlags.push("djs-browser-blackberry"),s.chrome&&this.cssFlags.push("djs-browser-chrome"),s.chromeMobile&&this.cssFlags.push("djs-browser-chrome-mobile"),s.cocoonJS&&this.cssFlags.push("djs-browser-cocoonjs"),s.edge&&this.cssFlags.push("djs-browser-edge"),s.ejecta&&this.cssFlags.push("djs-browser-ejecta"),s.electron&&this.cssFlags.push("djs-browser-electron"),s.epiphany&&this.cssFlags.push("djs-browser-epiphany"),s.firefox&&this.cssFlags.push("djs-browser-firefox"),s.firefoxMobile&&this.cssFlags.push("djs-browser-firefox-mobile"),s.ie&&this.cssFlags.push("djs-browser-ie"),s.ieMobile&&this.cssFlags.push("djs-browser-ie-mobile"),s.midori&&this.cssFlags.push("djs-browser-midori"),s.opera&&this.cssFlags.push("djs-browser-opera"),s.operaMobile&&this.cssFlags.push("djs-browser-opera-mobile"),s.phantom&&this.cssFlags.push("djs-browser-phantom"),s.safari&&this.cssFlags.push("djs-browser-safari"),s.safariMobile&&this.cssFlags.push("djs-browser-safari-mobile"),s.sailfish&&this.cssFlags.push("djs-browser-sailfish"),s.seamonkey&&this.cssFlags.push("djs-browser-seamonkey"),s.samsung&&this.cssFlags.push("djs-browser-samsung"),s.silk&&this.cssFlags.push("djs-browser-silk"),s.tizen&&this.cssFlags.push("djs-browser-tizen"),s.webOS&&this.cssFlags.push("djs-browser-webos"),s.version&&this.cssFlags.push("djs-browser-version-"+s.version))}catch(e){throw e}return s}},{key:"getAudio",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={audioData:!!window.Audio,webAudio:!(!window.webkitAudioContext&&!window.AudioContext)};try{var i=document.createElement("audio");i.canPlayType&&(t.merge(s,{ogg:""!==i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),opus:""!==i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),mp3:""!==i.canPlayType("audio/mpeg;").replace(/^no$/,""),wav:""!==i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:""!==(i.canPlayType("audio/x-m4a;").replace(/^no$/,"")||i.canPlayType("audio/aac;").replace(/^no$/,"")),webm:""!==i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}),e&&(s.ogg&&this.cssFlags.push("djs-audio-ogg"),s.opus&&this.cssFlags.push("djs-audio-opus"),s.mp3&&this.cssFlags.push("djs-audio-mp3"),s.wav&&this.cssFlags.push("djs-audio-wav"),s.m4a&&this.cssFlags.push("djs-audio-m4a"),s.webm&&this.cssFlags.push("djs-audio-webm")))}catch(e){throw e}return s}},{key:"getVideo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={};try{var i=document.createElement("video");i.canPlayType&&(t.merge(s,{mp4:""!==i.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/^no$/,""),ogv:""!==i.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/^no$/,""),webm:""!==i.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}),e&&(s.mp4&&this.cssFlags.push("djs-video-mp4"),s.ogv&&this.cssFlags.push("djs-video-ogv"),s.webm&&this.cssFlags.push("djs-video-webm")))}catch(e){throw e}return s}},{key:"checkFeature",value:function(e){var s=null;try{if("css3d"===e){s=document.createElement("p");var i=!1;return document.body.insertBefore(s,null),t.each(["-webkit-transform","-o-transform","-ms-transform","-moz-transform","transform"],function(e){s.style[e]&&(s.style[e]="translate3d(1px,1px,1px)",i=window.getComputedStyle(s).getPropertyValue(e))}),document.body.removeChild(s),!!i&&0<i.length&&"none"!==i}if("fullscreen"===e)return!!((s=document.createElement("canvas")).requestFullscreen||s.webkitRequestFullscreen||s.msRequestFullscreen||s.mozRequestFullScreen);if("webGL"===e)return s=document.createElement("canvas"),!!window.WebGLRenderingContext&&(s.getContext("webgl")||s.getContext("experimental-webgl"));if("webVR"===e)return!!("getVRDisplays"in l)}catch(e){return!1}return!1}},{key:"getFeatures",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s={};try{l.vibrate=l.vibrate||l.webkitVibrate||l.mozVibrate||l.msVibrate,t.merge(s,{async:r.async,addEventListener:r.addEventListener,battery:!!l.battery,canvas:r.canvas,classList:r.classList,cors:r.cors,contextMenu:r.contextMenu,css3D:this.checkFeature("css3d")&&r.css3Dtransform,cssTransform:r.cssTransform,cssTransition:r.cssTransition,defer:r.defer,file:!!(window.File&&window.FileReader&&window.FileList&&window.Blob),fileSystem:!!window.requestFileSystem,fullscreen:this.checkFeature("fullscreen"),geolocation:r.geolocation,getUserMedia:!!(l.getUserMedia||l.webkitGetUserMedia||l.mozGetUserMedia||l.msGetUserMedia),historyAPI:r.historyAPI,littleEndian:"undefined"!=typeof Int8Array&&0<new Int8Array(new Int16Array([1]).buffer)[0],localStorage:r.localStorage,matchMedia:r.matchMedia,motion:r.deviceMotion,mspointer:window.navigator.msPointerEnabled||window.navigator.pointerEnabled,orientation:r.deviceOrientation,pictureElement:r.pictureElement,pixelRatio:window.devicePixelRatio||1,placeholder:r.placeholder,pointerLock:"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,querySelectorAll:r.querySelectorAll,quirksMode:!("CSS1Compat"===document.compatMode),remUnit:r.remUnit,serviceWorker:r.serviceWorker,sizes:r.sizes,srcset:r.srcset,svg:r.svg,touch:("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&1<window.navigator.maxTouchPoints)&&r.touch,typedArray:"undefined"!=typeof Int8Array,vibration:l.vibrate,viewportUnit:r.viewportUnit,webGL:this.checkFeature("webGL")&&r.webGL,webVR:this.checkFeature("webVR"),worker:!!window.Worker}),e&&(s.css3D&&this.cssFlags.push("djs-feature-css3d"),s.cssTransform&&this.cssFlags.push("djs-feature-css-transforms"),s.cssTransition&&this.cssFlags.push("djs-feature-css-transitions"),s.fullscreen&&this.cssFlags.push("djs-feature-fullscreen"),s.motion&&this.cssFlags.push("djs-feature-device-motion"),s.orientation&&this.cssFlags.push("djs-feature-device-orientation"),s.pixelRatio&&this.cssFlags.push("djs-feature-pixel-ratio-"+s.pixelRatio),s.remUnit&&this.cssFlags.push("djs-feature-rem-unit"),s.touch&&this.cssFlags.push("djs-feature-touch"),s.webGL&&this.cssFlags.push("djs-feature-webgl"),s.webVR&&this.cssFlags.push("djs-feature-webvr"))}catch(e){throw e}return s}},{key:"setCssFlags",value:function(){document.documentElement.className+=this.cssFlags.join(" ")}}])&&c(e.prototype,i),o&&c(e,o),s}()});
