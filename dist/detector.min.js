(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global = global || self, global.Detector = factory());
}(this, function () { 'use strict';

  /* eslint-disable prefer-destructuring */

  /* eslint-disable prefer-rest-params */

  /* eslint-disable no-restricted-globals */

  /* eslint-disable no-bitwise */
  if (!Array.prototype.map) {
    Object.defineProperty(Array.prototype, 'map', {
      value: function value(arr, iterator) {
        var result = [];

        for (var i = 0; i < arr.length; i += 1) {
          result.push(iterator(arr[i]));
        }

        return result;
      }
    });
  }

  if (!Array.prototype.includes) {
    Object.defineProperty(Array.prototype, 'includes', {
      value: function value(valueToFind, fromIndex) {
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        } // 1. Let O be ? ToObject(this value).


        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, "length")).

        var len = o.length >>> 0; // 3. If len is 0, return false.

        if (len === 0) {
          return false;
        } // 4. Let n be ? ToInteger(fromIndex).
        //    (If fromIndex is undefined, this step produces the value 0.)


        var n = fromIndex | 0; // 5. If n ≥ 0, then
        //  a. Let k be n.
        // 6. Else n < 0,
        //  a. Let k be len + n.
        //  b. If k < 0, let k be 0.

        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

        function sameValueZero(x, y) {
          return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);
        } // 7. Repeat, while k < len


        while (k < len) {
          // a. Let elementK be the result of ? Get(O, ! ToString(k)).
          // b. If SameValueZero(valueToFind, elementK) is true, return true.
          if (sameValueZero(o[k], valueToFind)) {
            return true;
          } // c. Increase k by 1.


          k++;
        } // 8. Return false


        return false;
      }
    });
  } // Production steps of ECMA-262, Edition 5, 15.4.4.21
  // Reference: http://es5.github.io/#x15.4.4.21
  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce


  if (!Array.prototype.reduce) {
    Object.defineProperty(Array.prototype, 'reduce', {
      value: function value(callback
      /*, initialValue*/
      ) {
        if (this === null) {
          throw new TypeError('Array.prototype.reduce called on null or undefined');
        }

        if (typeof callback !== 'function') {
          throw new TypeError(callback + ' is not a function');
        } // 1. Let O be ? ToObject(this value).


        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, "length")).

        var len = o.length >>> 0; // Steps 3, 4, 5, 6, 7

        var k = 0;
        var value;

        if (arguments.length === 2) {
          value = arguments[1];
        } else {
          while (k < len && !(k in o)) {
            k++;
          } // 3. If len is 0 and initialValue is not present, throw a TypeError exception.


          if (k >= len) {
            throw new TypeError('Reduce of empty array with no initial value');
          }

          value = o[k++];
        } // 8. Repeat, while k < len


        while (k < len) {
          // a. Let Pk be ! ToString(k).
          // b. Let kPresent be ? HasProperty(O, Pk).
          // c. If kPresent is true, then
          //    i. Let kValue be ? Get(O, Pk).
          //    ii. Let accumulator be ? Call(callbackfn, undefined, « accumulator, kValue, k, O »).
          if (k in o) {
            value = callback(value, o[k], k, o);
          } // d. Increase k by 1.


          k++;
        } // 9. Return accumulator.


        return value;
      }
    });
  }

  if (!String.prototype.includes) {
    Object.defineProperty(String.prototype, 'includes', {
      value: function value(search, start) {
        start = typeof start !== 'number' ? 0 : start;

        if (start + search.length > this.length) {
          return false;
        }

        return this.indexOf(search, start) !== -1;
      }
    });
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function");
    }

    subClass.prototype = Object.create(superClass && superClass.prototype, {
      constructor: {
        value: subClass,
        writable: true,
        configurable: true
      }
    });
    if (superClass) _setPrototypeOf(subClass, superClass);
  }

  function _getPrototypeOf(o) {
    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
      return o.__proto__ || Object.getPrototypeOf(o);
    };
    return _getPrototypeOf(o);
  }

  function _setPrototypeOf(o, p) {
    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
      o.__proto__ = p;
      return o;
    };

    return _setPrototypeOf(o, p);
  }

  function _assertThisInitialized(self) {
    if (self === void 0) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }

    return self;
  }

  function _possibleConstructorReturn(self, call) {
    if (call && (typeof call === "object" || typeof call === "function")) {
      return call;
    }

    return _assertThisInitialized(self);
  }

  var FlagsClass =
  /*#__PURE__*/
  function () {
    function FlagsClass() {
      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'flags';

      _classCallCheck(this, FlagsClass);

      this._ua = ua;
      this._cssFlagsPrefix = cssFlagsPrefix;
      this._navigator = window.navigator;
      this._document = window.document;
      this._window = window;
    }

    _createClass(FlagsClass, [{
      key: "toFlags",
      value: function toFlags() {
        var _this = this;

        var proto = Object.getPrototypeOf(this);
        return Object.getOwnPropertyNames(proto).filter(function (prop) {
          return !!Object.getOwnPropertyDescriptors(proto)[prop].get;
        }).reduce(function (acc, item) {
          acc[item] = _this[item];
          return acc;
        }, {});
      }
    }, {
      key: "toCssFlags",
      value: function toCssFlags() {
        var _this2 = this;

        var proto = Object.getPrototypeOf(this);
        return Object.getOwnPropertyNames(proto).filter(function (prop) {
          return !!Object.getOwnPropertyDescriptors(proto)[prop].get;
        }).reduce(function (acc, item) {
          if (!!_this2[item]) {
            acc.push(_this2._cssFlagsPrefix + '-' + item);
          }

          return acc;
        }, []);
      }
    }]);

    return FlagsClass;
  }();

  var Features =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(Features, _FlagsClass);

    function Features() {
      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'feature';

      _classCallCheck(this, Features);

      return _possibleConstructorReturn(this, _getPrototypeOf(Features).call(this, ua, cssFlagsPrefix));
    }

    _createClass(Features, [{
      key: "isOldBrowser",
      value: function isOldBrowser() {
        return !!/(Android\s(1.|2.))|(Silk\/1.)/i.test(this._ua);
      }
    }, {
      key: "prefixes",
      value: function prefixes(prop) {
        var _this$_document$creat = this._document.createElement('dummy'),
            style = _this$_document$creat.style;

        var prefixes = ['Webkit', 'Moz', 'O', 'ms'];
        var ucProp = prop.charAt(0).toUpperCase() + prop.substr(1);
        var props = (prop + ' ' + prefixes.join(ucProp + ' ') + ucProp).split(' ');
        props.forEach(function (value, index) {
          if (style[props[value]] !== undefined) {
            return props[value];
          }

          return null;
        });
      }
    }, {
      key: "file",
      get: function get() {
        return !!this._window.File && !!this._window.FileReader && !!this._window.FileList && !!this._window.Blob;
      }
    }, {
      key: "fileSystem",
      get: function get() {
        return !!this._window.requestFileSystem;
      }
    }, {
      key: "getUserMedia",
      get: function get() {
        this._navigator.getUserMedia = this._navigator.getUserMedia || this._navigator.webkitGetUserMedia || this._navigator.mozGetUserMedia || this._navigator.msGetUserMedia;
        return !!this._navigator.getUserMedia;
      }
    }, {
      key: "littleEndian",
      get: function get() {
        return typeof Int8Array !== 'undefined' && new Int8Array(new Int16Array([1]).buffer)[0] > 0;
      }
    }, {
      key: "mspointer",
      get: function get() {
        return this._navigator.msPointerEnabled || this._navigator.pointerEnabled;
      }
    }, {
      key: "pixelRatio",
      get: function get() {
        return this._window.devicePixelRatio || 1;
      }
    }, {
      key: "pointerLock",
      get: function get() {
        return 'pointerLockElement' in this._document || 'mozPointerLockElement' in this._document || 'webkitPointerLockElement' in this._document;
      }
    }, {
      key: "quirksMode",
      get: function get() {
        return this._document.compatMode !== 'CSS1Compat';
      }
    }, {
      key: "typedArray",
      get: function get() {
        return typeof Int8Array !== 'undefined';
      }
    }, {
      key: "vibration",
      get: function get() {
        this._navigator.vibrate = this._navigator.vibrate || this._navigator.webkitVibrate || this._navigator.mozVibrate || this._navigator.msVibrate;
        return this._navigator.vibrate;
      }
    }, {
      key: "worker",
      get: function get() {
        return !!this._window.Worker;
      }
    }, {
      key: "css3D",
      get: function get() {
        var _this = this;

        var el = this._document.createElement('p');

        var hasCSS3D = false; // Add it to the body to get the computed style.

        this._document.body.insertBefore(el, null);

        ['-webkit-transform', '-o-transform', '-ms-transform', '-moz-transform', 'transform'].forEach(function (t) {
          if (!!el.style[t]) {
            el.style[t] = 'translate3d(1px,1px,1px)';
            hasCSS3D = _this._window.getComputedStyle(el).getPropertyValue(t);
          }
        });

        this._document.body.removeChild(el);

        return !!hasCSS3D && hasCSS3D.length > 0 && hasCSS3D !== 'none';
      } // Test if CSS 3D transforms are supported

    }, {
      key: "css3Dtransform",
      get: function get() {
        return !this.isOldBrowser() && this.prefixes('perspective') !== null;
      } // Test if CSS transforms are supported

    }, {
      key: "cssTransform",
      get: function get() {
        return !this.isOldBrowser() && this.prefixes('transformOrigin') !== null;
      } // Test if CSS transitions are supported

    }, {
      key: "cssTransition",
      get: function get() {
        return this.prefixes('transition') !== null;
      } // Test if addEventListener is supported

    }, {
      key: "addEventListener",
      get: function get() {
        return !!this._window.addEventListener;
      } // Test if querySelectorAll is supported

    }, {
      key: "querySelectorAll",
      get: function get() {
        return !!this._document.querySelectorAll;
      } // Test if matchMedia is supported

    }, {
      key: "matchMedia",
      get: function get() {
        return !!this._window.matchMedia;
      }
    }, {
      key: "battery",
      get: function get() {
        return !!this._navigator.battery;
      } // Test if Device Motion is supported

    }, {
      key: "deviceMotion",
      get: function get() {
        return 'DeviceMotionEvent' in this._window;
      } // Test if Device Orientation is supported

    }, {
      key: "deviceOrientation",
      get: function get() {
        return 'DeviceOrientationEvent' in this._window;
      } // Test if Context Menu is supported

    }, {
      key: "contextMenu",
      get: function get() {
        return 'contextMenu' in this._document && 'HTMLMenuItemElement' in this._window;
      } // Test if classList API is supported

    }, {
      key: "classList",
      get: function get() {
        return 'classList' in this._document;
      } // Test if placeholder attribute is supported

    }, {
      key: "placeholder",
      get: function get() {
        return 'placeholder' in this._document.createElement('input');
      } // Test if localStorage is supported

    }, {
      key: "localStorage",
      get: function get() {
        var test = 'x';

        try {
          this._window.localStorage.setItem(test, test);

          this._window.localStorage.removeItem(test);

          return true;
        } catch (err) {
          return false;
        }
      } // Test if History API is supported

    }, {
      key: "historyAPI",
      get: function get() {
        return this._window.history && 'pushState' in this._window.history;
      } // Test if ServiceWorkers are supported

    }, {
      key: "serviceWorker",
      get: function get() {
        return 'serviceWorker' in this._navigator;
      } // Test if viewport units are supported

    }, {
      key: "viewportUnit",
      get: function get() {
        var el = this._document.createElement('dummy');

        try {
          el.style.width = '1vw';
          var test = el.style.width !== '';
          return !!test;
        } catch (err) {
          return false;
        }
      } // Test if REM units are supported

    }, {
      key: "remUnit",
      get: function get() {
        var el = this._document.createElement('dummy');

        try {
          el.style.width = '1rem';
          var test = el.style.width !== '';
          return !!test;
        } catch (err) {
          return false;
        }
      } // Test if Canvas is supported

    }, {
      key: "canvas",
      get: function get() {
        var el = this._document.createElement('canvas');

        return !!(el.getContext && el.getContext('2d'));
      } // Test if SVG is supported

    }, {
      key: "svg",
      get: function get() {
        return !!this._document.createElementNS && !!this._document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
      } // Test if WebGL is supported

    }, {
      key: "webGL",
      get: function get() {
        var el = this._document.createElement('canvas');

        try {
          return !!(this._window.WebGLRenderingContext && (el.getContext('webgl') || el.getContext('experimental-webgl')));
        } catch (err) {
          return false;
        }
      } // Test if WebVR is supported

    }, {
      key: "webVR",
      get: function get() {
        return !!('getVRDisplays' in this._navigator);
      } // Test if cors is supported

    }, {
      key: "cors",
      get: function get() {
        return 'XMLHttpRequest' in this._window && 'withCredentials' in new this._window.XMLHttpRequest();
      } // Tests if touch events are supported, but doesn't necessarily reflect a touchscreen device

    }, {
      key: "touch",
      get: function get() {
        return ('ontouchstart' in this._document.documentElement || this._navigator.maxTouchPoints && this._navigator.maxTouchPoints > 1) && !!('ontouchstart' in this._window || this._navigator && this._navigator.msPointerEnabled && this._window.MSGesture || this._window.DocumentTouch && this._document instanceof this._window.DocumentTouch);
      } // Test if async attribute is supported

    }, {
      key: "async",
      get: function get() {
        return 'async' in this._document.createElement('script');
      } // Test if defer attribute is supported

    }, {
      key: "defer",
      get: function get() {
        return 'defer' in this._document.createElement('script');
      } // Test if Geolocation is supported

    }, {
      key: "geolocation",
      get: function get() {
        return 'geolocation' in this._navigator;
      } // Test if img srcset attribute is supported

    }, {
      key: "srcset",
      get: function get() {
        return 'srcset' in this._document.createElement('img');
      } // Test if img sizes attribute is supported

    }, {
      key: "sizes",
      get: function get() {
        return 'sizes' in this._document.createElement('img');
      } // Test if Picture element is supported

    }, {
      key: "pictureElement",
      get: function get() {
        return 'HTMLPictureElement' in this._window;
      }
    }, {
      key: "fullscreen",
      get: function get() {
        var el = this._document.createElement('canvas');

        return !!el.requestFullscreen || !!el.webkitRequestFullscreen || !!el.msRequestFullscreen || !!el.mozRequestFullScreen;
      }
    }, {
      key: "fullscreenKeyboard",
      get: function get() {
        return this._window.Element && 'ALLOW_KEYBOARD_INPUT' in this._window.Element;
      }
    }]);

    return Features;
  }(FlagsClass);

  var VideoFeature =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(VideoFeature, _FlagsClass);

    function VideoFeature() {
      var _this;

      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'video';

      _classCallCheck(this, VideoFeature);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(VideoFeature).call(this, ua, cssFlagsPrefix));
      _this._videoElement = document.createElement('video');
      return _this;
    }

    _createClass(VideoFeature, [{
      key: "supported",
      get: function get() {
        var asserts = [!!this._videoElement, this._videoElement instanceof this._window.HTMLVideoElement && this._videoElement instanceof this._window.HTMLMediaElement, !!this._videoElement.canPlayType];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "mp4",
      get: function get() {
        if (this.supported) {
          return this._videoElement.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }, {
      key: "ogv",
      get: function get() {
        if (this.supported) {
          return this._videoElement.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }, {
      key: "webm",
      get: function get() {
        if (this.supported) {
          return this._videoElement.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }]);

    return VideoFeature;
  }(FlagsClass);

  var AudioFeature =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(AudioFeature, _FlagsClass);

    function AudioFeature() {
      var _this;

      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'audio';

      _classCallCheck(this, AudioFeature);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(AudioFeature).call(this, ua, cssFlagsPrefix));
      _this._window.AudioContext = _this._window.AudioContext || _this._window.webkitAudioContext;
      _this._audioElement = document.createElement('audio');
      return _this;
    }

    _createClass(AudioFeature, [{
      key: "supported",
      get: function get() {
        var asserts = [!!this._window.Audio, !!this._audioElement, this._audioElement instanceof this._window.HTMLAudioElement && this._audioElement instanceof this._window.HTMLMediaElement, !!this._audioElement.canPlayType];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "context",
      get: function get() {
        return !!this._window.AudioContext;
      }
    }, {
      key: "ogg",
      get: function get() {
        if (this.supported) {
          return this._audioElement.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }, {
      key: "opus",
      get: function get() {
        if (this.supported) {
          return this._audioElement.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }, {
      key: "mp3",
      get: function get() {
        if (this.supported) {
          return this._audioElement.canPlayType('audio/mpeg;').replace(/^no$/, '') !== '';
        }

        return false;
      } // Mimetypes accepted:
      //   developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements
      //   bit.ly/iphoneoscodecs

    }, {
      key: "wav",
      get: function get() {
        if (this.supported) {
          return this._audioElement.canPlayType('audio/wav; codecs="1"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }, {
      key: "m4a",
      get: function get() {
        if (this.supported) {
          return (this._audioElement.canPlayType('audio/x-m4a;').replace(/^no$/, '') || this._audioElement.canPlayType('audio/aac;').replace(/^no$/, '')) !== '';
        }

        return false;
      }
    }, {
      key: "webm",
      get: function get() {
        if (this.supported) {
          return this._audioElement.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, '') !== '';
        }

        return false;
      }
    }]);

    return AudioFeature;
  }(FlagsClass);

  var Engines =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(Engines, _FlagsClass);

    function Engines() {
      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'engine';

      _classCallCheck(this, Engines);

      return _possibleConstructorReturn(this, _getPrototypeOf(Engines).call(this, ua, cssFlagsPrefix));
    }

    _createClass(Engines, [{
      key: "Blink",
      get: function get() {
        var asserts = [!!window.Intl && !!Intl.v8BreakIterator, 'CSS' in window, /webkit\/537\.36.+chrome\/(?!27)/i.test(this._ua)];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "WebKit",
      get: function get() {
        var asserts = [typeof window.webkitConvertPointFromNodeToPage === 'function', /(?:apple)?webkit\/([\w\.]+)/i.test(this._ua)];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "Trident",
      get: function get() {
        var asserts = [
        /*@cc_on!@*/
        !!document.documentMode, /(trident)[\/\s]\(?([\w\.]+)/i.test(this._ua)];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "EdgeHTML",
      get: function get() {
        var asserts = [!!window.StyleMedia, /edge\/(\d+(\.?_?\d+)+)/i.test(this._ua) || /windows.+\sedge\/([\w\.]+)/i.test(this._ua), !this.Trident];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "Gecko",
      get: function get() {
        var asserts = [typeof InstallTrigger !== 'undefined', /rv\:([\w\.]{1,9}).+(gecko)/i.test(this._ua)];
        return asserts.every(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "NetFront",
      get: function get() {
        return /(netfront)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "NetSurf",
      get: function get() {
        return /(netsurf)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "Amaya",
      get: function get() {
        return /(amaya)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "KHTML",
      get: function get() {
        return /(khtml)[\/\s]\(?([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "Presto",
      get: function get() {
        return /(presto)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "iCab",
      get: function get() {
        return /(icab)[\/\s]([23]\.[\d\.]+)/i.test(this._ua);
      }
    }, {
      key: "Tasman",
      get: function get() {
        return /(tasman)[\/\s]\(?([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "W3M",
      get: function get() {
        return /(w3m)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "Goanna",
      get: function get() {
        return /(goanna)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "Linx",
      get: function get() {
        return /(lynx)\/([\w\.]+)/i.test(this._ua);
      }
    }, {
      key: "Links",
      get: function get() {
        return /(links)[\/\s]\(?([\w\.]+)/i.test(this._ua);
      }
    }]);

    return Engines;
  }(FlagsClass);

  var OS =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(OS, _FlagsClass);

    function OS() {
      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'os';

      _classCallCheck(this, OS);

      return _possibleConstructorReturn(this, _getPrototypeOf(OS).call(this, ua, cssFlagsPrefix));
    } //! Desktop OSs


    _createClass(OS, [{
      key: "windows",
      get: function get() {
        return this._navigator.appVersion.includes('Win');
      }
    }, {
      key: "macOS",
      get: function get() {
        return this._navigator.appVersion.includes('Mac');
      }
    }, {
      key: "unix",
      get: function get() {
        return this._navigator.appVersion.includes('X11');
      }
    }, {
      key: "linux",
      get: function get() {
        return this._navigator.appVersion.includes('Linux');
      } //! Mobile OSs

    }, {
      key: "iOS",
      get: function get() {
        return /iPad|iPhone|iPod/i.test(this._ua) && !this._window.MSStream;
      }
    }, {
      key: "Android",
      get: function get() {
        return /Android/i.test(this._ua);
      }
    }]);

    return OS;
  }(FlagsClass);

  var CPUVendor =
  /*#__PURE__*/
  function (_FlagsClass) {
    _inherits(CPUVendor, _FlagsClass);

    function CPUVendor() {
      var _this;

      var ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.navigator.userAgent;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'cpu-vendor';

      _classCallCheck(this, CPUVendor);

      _this = _possibleConstructorReturn(this, _getPrototypeOf(CPUVendor).call(this, ua, cssFlagsPrefix));
      _this._navigator.cpuClass = _this._navigator.cpuClass || 'x86';
      _this._navigator.hardwareConcurrency = _this._navigator.hardwareConcurrency || 1;
      return _this;
    }

    _createClass(CPUVendor, [{
      key: "sparc",
      get: function get() {
        var asserts = [/(sun4\w)[;\)]/i.test(this._ua), /sparc(?:64)?(?=;);/i.test(this._ua)];
        return asserts.some(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "irix",
      get: function get() {
        return /irix(?:64)?(?=;);/i.test(this._ua);
      }
    }, {
      key: "mips",
      get: function get() {
        return /mips(?:64)?(?=;);/i.test(this._ua);
      }
    }, {
      key: "risc",
      get: function get() {
        return /pa-risc(?:64)?(?=;);/i.test(this._ua);
      }
    }, {
      key: "avr",
      get: function get() {
        return /(?=atmel\s)avr/i.test(this._ua);
      }
    }, {
      key: "arm",
      get: function get() {
        var asserts = [/windows\s(ce|mobile);\sppc;/i.test(this._ua), /arm(?:64|(?=v\d+[;l]))/i.test(this._ua)];
        return asserts.some(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "powerPC",
      get: function get() {
        var asserts = [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i.test(this._ua), this._navigator.platform === 'MacPPC'];
        return asserts.some(function (assert) {
          return !!assert;
        });
      }
    }, {
      key: "intel",
      get: function get() {
        var asserts64 = [/(?:avr32|ia64(?=;))|68k(?=\))/i.test(this._ua), /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i.test(this._ua), this._navigator.cpuClass === 'x64' || this._navigator.platform === 'MacIntel' || this._navigator.platform === 'Linux x86_64'];
        var asserts32 = [/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i.test(this._ua), /(ia32(?=;))/i.test(this._ua), /((?:i[346]|x)86)[;\)]/i.test(this._ua), this._navigator.cpuClass === 'x86'];
        return asserts64.some(function (assert) {
          return !!assert;
        }) || asserts32.some(function (assert) {
          return !!assert;
        });
      }
    }]);

    return CPUVendor;
  }(FlagsClass);

  var Detector =
  /*#__PURE__*/
  function () {
    function Detector() {
      var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var cssFlagsPrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'djs';
      var ua = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window.navigator.userAgent;

      _classCallCheck(this, Detector);

      this._ua = ua;
      this._navigator = window.navigator;
      this._document = window.document;
      this._window = window;

      if (!!cssFlags) {
        this._cssFlags = [];
        this._cssFlagsPrefix = cssFlagsPrefix;
      }

      this.engines = this.getEngines(this._cssFlags);
      this.features = this.getFeatures(this._cssFlags);
      this.audio = this.getAudio(this._cssFlags);
      this.video = this.getVideo(this._cssFlags);
      this.cpu = this.getCPU(this._cssFlags);
      this.platform = this.getPlatform(this._cssFlags);
      this.os = this.getOS(this._cssFlags);
      this.browser = this.getBrowser(this._cssFlags);

      if (!!this._cssFlags) {
        this.setCssFlags();
      }

      console.warn('DetectorJS initialized', this);
    }

    _createClass(Detector, [{
      key: "getOS",
      value: function getOS() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var os = new OS(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(os.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return os.toFlags();
      }
    }, {
      key: "getEngines",
      value: function getEngines() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var engines = new Engines(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(engines.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return engines.toFlags();
      }
    }, {
      key: "getFeatures",
      value: function getFeatures() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var features = new Features(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(features.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return features.toFlags();
      }
    }, {
      key: "getVideo",
      value: function getVideo() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var video = new VideoFeature(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(video.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return video.toFlags();
      }
    }, {
      key: "getAudio",
      value: function getAudio() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var audio = new AudioFeature(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(audio.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return audio.toFlags();
      }
    }, {
      key: "getCPU",
      value: function getCPU() {
        var cssFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        var cpu = new CPUVendor(this._ua);

        try {
          if (!!cssFlags) {
            this._cssFlags = this._cssFlags.concat(cpu.toCssFlags());
          }
        } catch (e) {
          throw e;
        }

        return cpu.toFlags();
      }
    }, {
      key: "getPlatform",
      value: function getPlatform() {
        var p = {};

        try {
        } catch (e) {
          throw e;
        }

        return p;
      } // getOS(cssFlags = false) {
      //   const o = {};
      //   try {
      //     // o = merge(o, {
      //     // architecture: platform.os.architecture === 32 ? 'x86' : 'x64',
      //     // name: platform.os.family,
      //     // version: platform.os.version || userAgent.osversion,
      //     // android: userAgent.android, //&& platform.os.family === 'Android',
      //     // bada: userAgent.bada,
      //     // blackberry: userAgent.blackberry,
      //     // chromeOS: userAgent.chromeos,
      //     // firefoxOS: userAgent.firefoxos,
      //     // iOS: userAgent.ios, // && platform.os.family === 'iOS',
      //     // linux: userAgent.linux, //&& ['Ubuntu', 'Debian', 'Fedora', 'Red Hat', 'SuSE'].includes(platform.os.family),
      //     // macOS: /Mac OS/.test(navigator.UserAgent), // && userAgent.mac && ['OS X', 'macOS'].includes(platform.os.family),
      //     // sailfish: userAgent.sailfish,
      //     // tizen: userAgent.tizen,
      //     // windows: userAgent.windows, // && ['Windows', 'Windows Server 2008 R2 / 7', 'Windows Server 2008 / Vista', 'Windows XP'].includes(platform.os.family),
      //     // windowsPhone: userAgent.windowsphone, // && platform.os.family === 'Windows Phone',
      //     // });
      //     if (!!cssFlags) {
      //       // !!o.android && this._cssFlags.push('os-android');
      //       // !!o.bada && this._cssFlags.push('os-bada');
      //       // !!o.blackberry && this._cssFlags.push('os-blackberry');
      //       // !!o.chromeOS && this._cssFlags.push('os-chromeos');
      //       // !!o.firefoxOS && this._cssFlags.push('os-firefoxos');
      //       // !!o.iOS && this._cssFlags.push('os-ios');
      //       // !!o.linux && this._cssFlags.push('os-linux');
      //       // !!o.macOS && this._cssFlags.push('os-macos');
      //       // !!o.sailfish && this._cssFlags.push('os-sailfish');
      //       // !!o.tizen && this._cssFlags.push('os-tizen');
      //       // !!o.windows && this._cssFlags.push('os-windows');
      //       // !!o.windowsPhone && this._cssFlags.push('os-windowsphone');
      //       // !!o.version && this._cssFlags.push('os-version-' + o.version);
      //     }
      //   } catch (e) {
      //     throw e;
      //   }
      //   return o;
      // }

    }, {
      key: "getBrowser",
      value: function getBrowser() {
        var b = {};

        try {
        } catch (e) {
          throw e;
        }

        return b;
      }
    }, {
      key: "setCssFlags",
      value: function setCssFlags() {
        document.documentElement.className += this._cssFlagsPrefix + '-' + this._cssFlags.join(' ' + this._cssFlagsPrefix + '-').trim();
      }
    }]);

    return Detector;
  }();

  return Detector;

}));
